(this.webpackJsonpmyreactapp=this.webpackJsonpmyreactapp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),o=t(14),r=t.n(o),u=t(4),l=t(2),i=t(3),s=t.n(i),m="/api/persons",f=function(e){var n=e.onChangeSearchTerm,t=e.searchTerm;return c.a.createElement("div",null,"Filter by:",c.a.createElement("input",{onChange:n,value:t}))},d=function(e){var n=e.name,t=e.phone,a=e.onChangeName,o=e.onChangePhone,r=e.onSubmit;return c.a.createElement("form",{onSubmit:r},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:n,onChange:a})),c.a.createElement("div",null,"phone: ",c.a.createElement("input",{value:t,onChange:o})),c.a.createElement("div",null,c.a.createElement("button",null,"add")))},h=function(e){var n=e.persons,t=e.onDeletePerson;return c.a.createElement("ul",null,n.map((function(e,n){return c.a.createElement("li",{key:"".concat(e.name," ").concat(n)},c.a.createElement("span",null,e.name," ",e.number),c.a.createElement("button",{onClick:function(){return t(e.id)}},"delete"))})))},p=(t(38),function(e){var n=e.msg;return c.a.createElement("div",{className:"error"===n.type?"error":"success"},c.a.createElement("p",null,n.content))}),b=function(e){return e.toLowerCase()},E=function(e,n){return e.find((function(e){return b(e.name)===b(n)}))},g=function(){var e={type:"",content:""},n=Object(a.useState)([]),t=Object(l.a)(n,2),o=t[0],r=t[1],i=Object(a.useState)(""),g=Object(l.a)(i,2),v=g[0],y=g[1],j=Object(a.useState)(""),O=Object(l.a)(j,2),w=O[0],C=O[1],S=Object(a.useState)(""),k=Object(l.a)(S,2),P=k[0],T=k[1],N=Object(a.useState)(e),D=Object(l.a)(N,2),J=D[0],x=D[1];Object(a.useEffect)((function(){s.a.get(m).then((function(e){return e.data})).then((function(e){console.log(e),r(function(e,n){return e.filter((function(e){return b(e.name).includes(b(n))}))}(e,P))})).catch((function(e){console.log(e)})),J.type&&setTimeout((function(){x(e)}),2e3)}),[P,J]);return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(f,{searchTerm:P,onChangeSearchTerm:function(e){return T(e.target.value)}}),c.a.createElement("h3",null,"Add New Person"),c.a.createElement(d,{name:v,phone:w,onChangeName:function(e){return y(e.target.value)},onChangePhone:function(e){return C(e.target.value)},onSubmit:function(e){if(e.preventDefault(),E(o,v)){if(window.confirm("".concat(v," is already added to phonebook. Want to update their phone's number?"))){var n=E(o,v),t=Object(u.a)(Object(u.a)({},n),{},{number:w});(function(e,n){return s.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))})(n.id,t).then((function(e){r(o.map((function(n){return n.id!==e.id?n:e}))),x({type:"success",content:"".concat(v,"'s phone number was add successfully updated.")})})).catch((function(e){console.log(e),console.log(e.response)}))}}else(a={name:v,number:w},s.a.post(m,a).then((function(e){return e.data}))).then((function(e){r(o.concat(e)),y(""),C(""),x({type:"success",content:"".concat(v," was add successfully your notebook.")})})).catch((function(e){console.log(e),console.log(e.response)}));var a}}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(h,{persons:o,onDeletePerson:function(e){window.confirm("You sure you want to delete this person?")&&function(e){return s.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}(e).then((function(n){r(o.filter((function(n){return n.id!==e}))),x({type:"success",content:"Successfully deleted."})})).catch((function(e){x({type:"error",content:"The person you're trying to delete has already been removed from the server."})}))}}),J.type&&c.a.createElement(p,{msg:J}))};r.a.render(c.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.4901f8dd.chunk.js.map